\section{Testes}
\label{sec:testes}

Com o intuito de verificar o desempenho do Sistema TRUE foram realizados uma
série de testes abrangendo os dados de Rastreamento, Localização e
Reconhecimento. Tais testes ocorreram no Laboratório LAICO (LAboratório de Sistemas Integrados e
COncorrentes) do Departamento de Ciência da Computação da Universidade de
Brasília.

\subsection{Rastreamento}

Foram realizados testes com o objetivo de verificar a eficiência da detecção e o
dimensão da oclusão dentro do sistema. A oclusão era um problema esperado uma
vez que o Sistema TRUE utiliza somente um sensor \textit{Kinect} como
dispositivo de entrada. Os testes para a detecção foram feitos simulando a
entrada de um usuário na cena e analisando o momento em que o mesmo era
detectado. Em todos os testes o usuário era detectado antes mesmo de entrar na
área de visão do sistema por completo.

Foram realizados dois testes para a oclusão. No primeiro foi testado o caso em que
um usuário oculta propositalmente outro já rastreado. Nesta situação, caso o
usuário rastreado continuasse oculto, o sistema o determinava como perdido. Por
outro lado, nos casos de oclusão parcial, o sistema se mostrou robusto. No
segundo teste foi simulada a situação de oclusão momentânea, ou seja, um usuário
em movimento oculta outro por um curto período de tempo em razão da sua
movimentação. Nestes casos, o sistema TRUE perde o usuário rastreado, mas
rapidamente é capaz de detectá-lo novamente.

Durante os testes realizados com rastreamento foi observado alguns problemas
quando o usuário rastreado interagia com objetos do ambiente ou com outros
usuários. Na grande maioria das vezes em que o usuário interagiu com objetos, o
Sistema TRUE considerou o objeto como sendo parte do usuário. Entretanto, esta
situação não prejudicou a eficiência do sistema. Por outro lado, os problemas
com interação entre usuários foram mais raros, porém tiveram impacto maior. Tais
problemas consistem em ``interferências'' que ocorreram em algumas situações de
contato entre dois ou mais usuários. Apesar dos problemas relatados, o rastreamento conseguiu, na maioria dos testes,
atender às necessidades rastreando os diversos usuários no ambiente em suas
atividades diárias.

\subsection{Localização}

O Sistema TRUE obtém a localização dos usuários no ambiente por meio de
coordenadas dos mesmos em relação ao \textit{Kinect}. Para verificar a acurácia
dessas coordenadas foram realizados alguns testes. Os testes foram realizados
para as coordenada do eixo x e z.

Para testar a precisão as coordenadas do eixo z foi realizado o seguinte teste:
um objeto (uma caixa de papelão) foi colocada em frente ao sensor a diferentes
distâncias do mesmo (1000mm, 2000mm, 3000mm, 4000mm, 4057mm). Foi observado, a
discrepância aumenta conforme o objeto se distancia do sensor. Neste teste o
menor erro obtido foi de 3,21mm e o maior de 111,75mm. Desta forma o sistema
apresenta um erro máximo de 3\% sobre os valores obtidos. Um valor que pode ser
considerado desprezível para a maior parte das aplicações.

Para testar a precisão das coordenadas do eixo x foi realizado o seguinte teste:
um objeto (uma caixa de papelão) foi colocada a uma distância fixa de 3000
milímetros do sensor e colocada em diferentes posições ao longo do eixo
$\displaystyle x$ (0, $\displaystyle \pm330mm$, $\displaystyle \pm660mm$,
$\displaystyle \pm990mm$). Foi observado que existe uma diferença constante de
poucos centímetros ao longo de todo teste. É possível inferir então, que o
Sistema TRUE consegue fazer estimativas das coordenadas no eixo $\displaystyle
x$ com erro de poucos centímetros. Neste caso o menor e o maior erro obtido foi
de 27,19mm e 79,29mm respectivamente. Chegamos então a um erro máximo de 10\%
sobre os valores obtidos. Este é um valor mais significativo que o teste
anterior mas, ainda assim, pode ser relevado na maior parte das aplicações.

\subsection{Identificação}

Para testar os resultados de identificação foram realizadas 2 iterações de
testes, uma vez que a primeira proposta não apresentou resultados satisfatórios.
 Para análise foram
utilizados três percentuais: verdadeiro positivo, quando o sistema identifica o
usuário de maneira correta; verdadeiro negativo, quando o sistema identifica o
usuário de maneira errada; e falso negativo, quando o sistema não identifica o
usuário cadastrado.

No primeiro cenário de testes, os cadastros foram feitos utilizando
10 imagens de faces de cada usuário: 6 imagens frontais, 2 imagens da
face ligeiramente rotacionada para a direita e 2 imagens dela ligeiramente
rotacionada para a esquerda.  Essa estratégia tem
com o objetivo diminuir o impacto das variações de poses e ângulo no
reconhecimento facial.  Observou-se que a taxa de Verdadeiro Positivo,
\textbf{73,63\%}, foi uma taxa baixa para um sistema de reconhecimento
automático. A taxa de Verdadeiro Negativo,
\textbf{15,83\%}, foi bem superior a taxa de Falso Negativo, \textbf{8,34\%},
mostrando que a principal deficiência do reconhecimento facial consiste na
confusão entre os usuários cadastrados no sistema.

Esses resultados não foram considerados satisfatórios. Sob a hipótese
do resultado ter sido influenciado pela baixa quantidade de faces e poses,
construiu-se um segundo cenário de testes, onde os cadastros foram feitos utilizando 100
imagens das faces de cada usuário em diferentes ângulos, posições e expressões
faciais. No momento do cadastro, foi solicitado que os usuários movimentassem o
rosto levemente para cima, para baixo, para esquerda e para direita de maneira
aleatória e com diferentes expressões faciais.

Para esse segundo cenário houve um aumento na taxa de Verdadeiro Positivo de
\textbf{73,63\%} para \textbf{82,5\%} e redução significativa na taxa de
Verdadeiro Negativo de \textbf{15,83\%} para \textbf{5,46\%}, mostrando que os
casos de confusões entre os usuários foram mais raros. A melhora obtida comprova
a hipótese que um número maior de poses e faces aprimorou a capacidade do
sistema de reconhecer seus usuários. Com uma maior variabilidade nos dados de um
mesmo usuário temos um melhor treinamento do sistema. Isso torna os valores de
\textit{eigenfaces} calculados mais robustos para uma maior diversidade de poses
a serem encontradas durante a execução.  

% \subsection{Integração}
% 
% Com intuito de exemplificar a utilização do \textit{UserDriver} e testar a
% integração do Sistema TRUE com o middleware \textit{uOS} foi desenvolvido uma
% aplicação para o middleware chamada \textit{UserApp}. Esta aplicação registra um
% \textit{listener} para ``escutar'' os eventos do \textit{UserDriver} chamado
% \textit{UserListener}.
% 
% Quando o \textit{UserListener} é inicializado ele obtém acesso ao Twitter e se
% registra para escutar os eventos gerados pelo \textit{UserDriver}. Para cada
% evento obtido, ele envia mensagens pelo Twitter para os usuários no ambiente.
% Para eventos de ``novo usuário detectado'' e ``usuário perdido'', ele envia
% mensagens de boas vindas e de despedidas respectivamente.  O
% \textit{UserDriver} também gera eventos de atualização dos dados dos usuários.
% Quando estes eventos são gerados, o \textit{UserListener} verifica se houve
% atualização na identidade do usuário e se o mesmo está a mais de uma hora no
% mesmo lugar. Caso esteja, ele envia mensagens aos usuários informando estes
% acontecimentos.
% 
% Testes funcionais foram feitos com a aplicação mostrando que o \textit{driver}
% consegue obter os dados íntegros do Sistema TRUE e gerar os eventos de maneira
% praticamente instantânea. A Figura mostra as mensagens geradas pela aplicação em
% um teste funcional, onde Danilo, um usuário cadastrado, entra no ambiente senta
% em uma mesa com seu notebook permanecendo no mesmo lugar por mais de uma hora, e
% logo depois deixa o ambiente.
% 
% \begin{figure}[hbt]
% 	\begin{center}
% 		\includegraphics[scale=0.6]{img/tweets.png}
% 	\end{center}
% 	\caption{Exemplo das mensagens enviadas pelo Twitter aos usuários no ambiente.}
% 	\label{fig:tweets}
% \end{figure}

